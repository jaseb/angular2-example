// Do not edit this file (e.g. go instead to src/main/asciidoc)

= Angular 2 Example Documentation
Jase <https://github.com/jaseb/angular2-example>
v1.0.0, 2017-01-14
:description: Angular 2 Example - Documentation.
:keywords: Angular, Angular 2, angular-cli, Spring Boot, spring, spring-boot
:imagesdir: images
:experimental:
:toc:
:toc-placement: left
:toc-title: pass:[<b>Table of Contents</b>]
:nofooter:
:outfilesuffix-old: {outfilesuffix}
// ifdef::env-github,env-browser[:outfilesuffix: .adoc]
:idprefix:
:idseparator: -
//:source-highlighter: prettify
:source-highlighter: highlightjs
// Preview available themes at https://highlightjs.org/static/demo/
:highlightjs-theme: monokai


// ============================================================================

[abstract]
== Overview

An example Angular 2 app using angular-cli and Spring Boot.

For more information about these projects, see the links below:

* https://angular.io[Angular 2] (https://cli.angular.io[angular-cli])
* https://v4-alpha.getbootstrap.com[Bootstrap 4]
* https://ng-bootstrap.github.io/#/home[ng-bootstrap]
* https://projects.spring.io/spring-boot/[Spring Boot]

== Project setup

=== Create the project directory

[source,bash]
----
mkdir angular2-example
cd angular2-example
git init .
----

=== Spring Boot app using start.spring.io

Ensure you are in the top-level project directory 'angular2-example'.

Run the following, which will use https://start.spring.io to generate a starter project.

[source,bash]
----
curl https://start.spring.io/starter.zip \
  -d type=maven-project \
  -d applicationName="AngularApplication" \
  -d packageName="jp.bikon" \
  -d groupId="jp.bikon" -d name="Angular 2 Application" -d artifactId="angular2-example" \
  -d description="Angular 2 Application" \
  -d dependencies=web,actuator \
  -d version="0.1.0-SNAPSHOT" \
  -d javaVersion="1.8" \
  | tar -xzvf -
----

=== Use YAML for project configuration

Spring Boot is able to use http://yaml.org[YAML], or the older style properties files for configuration. This project will use YAML.

[source,bash]
----
mv src/main/resources/application.properties src/main/resources/application.yml
----

=== Add Spring Boot files to git

Run the following:

[source,bash]
----
git add .
git commit -m 'Spring Boot app using start.spring.io'
----

=== Test with 'spring-boot:run'

Run the following (using http://maven.apache.org[Maven]), and browse to http://localhost:8080

[source,bash]
----
mvn spring-boot:run
----

It is also possible to setup a Spring Boot project using https://gradle.org[Gradle]

If using Gradle, use the following command to start the Spring Boot app:

[source,bash]
----
./gradlew bootRun
----

=== Angular 2 app using angular-cli

Initialise an Angular 2 application, with the additional options to use http://sass-lang.com[Sass].

It is also possible to create a new Angular 2 project using 'ng new angular2-example', although in this example we are adding Angular to an existing application.

[source,bash]
----
ng init --style=scss
----

Choose 'n' when prompted to overwrite the existing .gitignore.

Note: It is also possible to change the CSS preprocessor after the app was created:

[source,bash]
----
ng set defaults.styleExt scss
----

=== Add Angular files to git

The 'node_modules' created by Angular will be excluded from version control.

Run the following:

[source,bash]
----
# Amend .gitignore
echo '' >> .gitignore
echo '### Angular2 ###' >> .gitignore
echo 'node_modules' >> .gitignore

# Add the files
git add .
git commit -m 'Angular 2 app using angular-cli'
----

=== Test with 'ng serve'

Run the following, and browse to http://localhost:4200

[source,bash]
----
ng serve
----

=== Integrate Angular 2 with Spring Boot

The Angular 2 'dist' directory will be amended to use the default Spring location for static files.

The enables us to develop the front-end using the default 'ng serve', and deploy the application using 'spring-boot:run'.

Amend link:../angular-cli.json[angular-cli.json] and change the location of the 'dist' directory.

[source,json]
----
"outDir": "src/main/resources/static/",
----

==== Test the integration

Run the following command to build the app and deploy using Spring.

[source,bash]
----
ng build
mvn spring-boot:run
----

Open http://localhost:8080[http://localhost:8080]

== Bootstrap configuration

The ng-bootstrap project provides a set of Angular 2 directives to handle dynamic behaviour.
This alleviates the need to import jQuery or Bootstrap javascript functionality.

Links:

https://v4-alpha.getbootstrap.com/getting-started/download/#package-managers

https://ng-bootstrap.github.io/#/home

=== Install dependencies

[source,bash]
----
npm install --save bootstrap@4.0.0-alpha.6
npm install --save @ng-bootstrap/ng-bootstrap
----

You can verify the installation by checking the 'dependencies' section of link:../package.json[package.json]

=== Amend Angular configuration

==== Step 1

Amend app.module.ts as follows:

.app.module.ts
[source,json,indent=0]
----
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { HttpModule } from '@angular/http';
import {NgbModule} from '@ng-bootstrap/ng-bootstrap'; # <1>

import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    FormsModule,
    HttpModule,
    NgbModule.forRoot()  # <2>
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
----
<1> Import NgbModule
<2> Declare NgbModule.forRoot()

==== Step 2
Amend angular-cli.json as follows:

.angular-cli.json
[source,json,indent=0]
----
...
"styles": [
  "../node_modules/bootstrap/dist/css/bootstrap.css", # <1>
  "styles.scss"
],
...
----
<1> Add bootstrap.css

=== Test with ng-bootstrap component

Amend app.component.html as follows:

.app.component.html
[source,html]
----
<p>
  <ngb-alert [dismissible]="false">
    {{title}} with ng-bootstrap
  </ngb-alert>
</p>
----

Run 'ng serve' and browse to http://localhost:4200

== Asciidoc setup and usage

The project uses http://asciidoctor.org/docs/what-is-asciidoc/[Asciidoc].

Generation scripts are from the Spring Boot project, and are used to create README.adoc and HTML 5 documentation.

https://pages.github.com[GitHub Pages] integration is not covered in this example.

To generate documentation run the following from the 'docs' directory:

[source,bash]
----
mvn clean install
----

This will generate HTML in the 'target' directory, and update the project README.adoc


Links:

http://asciidoctor.org/docs/asciidoctor-maven-plugin[asciidoctor-maven-plugin]

https://github.com/spring-projects/spring-boot/tree/master/spring-boot-docs


// ============================================================================